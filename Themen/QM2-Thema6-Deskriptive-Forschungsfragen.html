<!DOCTYPE html>
<html lang="de-DE" xml:lang="de-DE">
  <head>
    <title>Deskriptive Forschungsfragen</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/hygge.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="my-css.css" type="text/css" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Deskriptive Forschungsfragen
## QM2, Thema 6
### AWM, HS Ansbach

---






&lt;style&gt;

.center2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}

&lt;/style&gt;








  










































## Gliederung





.center2[.xlarge[
1. [Teil 1: Wissenschaft als Gerechtigkeitsprojekt](#intro)
2. [Teil 2: binär, AV: metrisch](#teil1)
3. [Teil 3: Metrische plus nominale UV](#teil2)
3. [Hinweise](#hinweise)
4. [Literatur](#literatur)
]
]
---





















name: teil3
class: middle, center

# Eine nominale UV mit mehreren Stufen

---


## Forschungsfrage


&gt; Unterscheiden sich mittlere Diamantenpreise in Abhängigkeit von ihrer Schliffart? (Datensatz `diamonds`)

- Formal: `\(\mu_1 = \mu_2 = \ldots = \mu_k\)` mit `\(k\)` verschiedenen Gruppen von Schliffart.

- Hypothesen, die keinen (Null) Unterschied zwischen Gruppen oder keinen Zusammenhang zwischen Variablen postulieren, kann man als *Nullhypothesen* bezeichnen.

- Moment. Dass sich *alle* Mittelwerte um 0,00000000 unterscheiden, ist wohl nicht zu vermuten. Wer glaubt sowas? Daher ist die bessere Forschungsfrage:

&gt; *Wie sehr* unterscheiden sich mittlere Diamantenpreise in Abhängigkeit von ihrer Schliffart?

Oder wir prüfen die Hypothese, ob die Mittelwerte "praktisch" gleich sind, also sich "kaum" unterscheiden. Der Grenzwert für "praktisch gleich" bzw. "kaum unterschiedlich" ist subjektiv.

---

## Erster Blick in den Datensatz 

[Datenquelle](https://vincentarelbundock.github.io/Rdatasets/csv/ggplot2/diamonds.csv), [Beschreibung des Datensatzes](https://vincentarelbundock.github.io/Rdatasets/doc/ggplot2/diamonds.html)


```r
diamonds_url &lt;- "https://tinyurl.com/up84jp5c"
```


```r
set.seed(42)  # Zufallszahlen für `sample()` festlegen
diamonds &lt;- 
  read_csv(diamonds_url) %&gt;% 
  sample_n(1000) %&gt;%  # um etwas Rechenzeit zu sparen
  select(-1) # 1. Spalte nur laufende Nummer
```


```r
diamonds %&gt;% 
  select(price, cut) %&gt;% 
  group_by(cut) %&gt;% 
  # nehmen wir die robusten Statistiken, da Preis sehr schief ist:
  get_summary_stats(type = "robust")
```




---

## Ein Überblick über die metrischen Variablen



... aufgeteilt in die Stufen von `cut`:

<div id="iukyokvzul" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#iukyokvzul .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#iukyokvzul .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iukyokvzul .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#iukyokvzul .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#iukyokvzul .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iukyokvzul .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iukyokvzul .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#iukyokvzul .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#iukyokvzul .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#iukyokvzul .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#iukyokvzul .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#iukyokvzul .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#iukyokvzul .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#iukyokvzul .gt_from_md > :first-child {
  margin-top: 0;
}

#iukyokvzul .gt_from_md > :last-child {
  margin-bottom: 0;
}

#iukyokvzul .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#iukyokvzul .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#iukyokvzul .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iukyokvzul .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#iukyokvzul .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iukyokvzul .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#iukyokvzul .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#iukyokvzul .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#iukyokvzul .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iukyokvzul .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#iukyokvzul .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iukyokvzul .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#iukyokvzul .gt_left {
  text-align: left;
}

#iukyokvzul .gt_center {
  text-align: center;
}

#iukyokvzul .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#iukyokvzul .gt_font_normal {
  font-weight: normal;
}

#iukyokvzul .gt_font_bold {
  font-weight: bold;
}

#iukyokvzul .gt_font_italic {
  font-style: italic;
}

#iukyokvzul .gt_super {
  font-size: 65%;
}

#iukyokvzul .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">cut</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">median</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">iqr</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Fair</td>
<td class="gt_row gt_left">price</td>
<td class="gt_row gt_right">33.0</td>
<td class="gt_row gt_right">3,640.0</td>
<td class="gt_row gt_right">1,976.0</td></tr>
    <tr><td class="gt_row gt_left">Good</td>
<td class="gt_row gt_left">price</td>
<td class="gt_row gt_right">102.0</td>
<td class="gt_row gt_right">3,089.5</td>
<td class="gt_row gt_right">3,744.8</td></tr>
    <tr><td class="gt_row gt_left">Ideal</td>
<td class="gt_row gt_left">price</td>
<td class="gt_row gt_right">407.0</td>
<td class="gt_row gt_right">1,759.0</td>
<td class="gt_row gt_right">3,849.5</td></tr>
    <tr><td class="gt_row gt_left">Premium</td>
<td class="gt_row gt_left">price</td>
<td class="gt_row gt_right">230.0</td>
<td class="gt_row gt_right">4,057.5</td>
<td class="gt_row gt_right">5,295.2</td></tr>
    <tr><td class="gt_row gt_left">Very Good</td>
<td class="gt_row gt_left">price</td>
<td class="gt_row gt_right">228.0</td>
<td class="gt_row gt_right">2,759.5</td>
<td class="gt_row gt_right">3,902.5</td></tr>
  </tbody>
  
  
</table>
</div>

---

## EDA


.pull-left[

<div id="nuizkahzkl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#nuizkahzkl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nuizkahzkl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nuizkahzkl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nuizkahzkl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nuizkahzkl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nuizkahzkl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nuizkahzkl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nuizkahzkl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nuizkahzkl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nuizkahzkl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nuizkahzkl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nuizkahzkl .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#nuizkahzkl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nuizkahzkl .gt_from_md > :first-child {
  margin-top: 0;
}

#nuizkahzkl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nuizkahzkl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nuizkahzkl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#nuizkahzkl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nuizkahzkl .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#nuizkahzkl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nuizkahzkl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nuizkahzkl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nuizkahzkl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nuizkahzkl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nuizkahzkl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#nuizkahzkl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nuizkahzkl .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#nuizkahzkl .gt_left {
  text-align: left;
}

#nuizkahzkl .gt_center {
  text-align: center;
}

#nuizkahzkl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nuizkahzkl .gt_font_normal {
  font-weight: normal;
}

#nuizkahzkl .gt_font_bold {
  font-weight: bold;
}

#nuizkahzkl .gt_font_italic {
  font-style: italic;
}

#nuizkahzkl .gt_super {
  font-size: 65%;
}

#nuizkahzkl .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">cut</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">price_md</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">price_iqr</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Fair</td>
<td class="gt_row gt_right">3,640</td>
<td class="gt_row gt_right">1,976</td></tr>
    <tr><td class="gt_row gt_left">Good</td>
<td class="gt_row gt_right">3,090</td>
<td class="gt_row gt_right">3,745</td></tr>
    <tr><td class="gt_row gt_left">Ideal</td>
<td class="gt_row gt_right">1,759</td>
<td class="gt_row gt_right">3,850</td></tr>
    <tr><td class="gt_row gt_left">Premium</td>
<td class="gt_row gt_right">4,058</td>
<td class="gt_row gt_right">5,295</td></tr>
    <tr><td class="gt_row gt_left">Very Good</td>
<td class="gt_row gt_right">2,760</td>
<td class="gt_row gt_right">3,902</td></tr>
  </tbody>
  
  
</table>
</div>


]

.pull-right[
&lt;img src="chunk-img/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]
&lt;img src="chunk-img/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /&gt;



---

## Mittlere Preisunterschiede in der Population




```r
options(mc.cores = parallel::detectCores())  # Turbo einschalten

m10.6 &lt;- stan_glm(price ~ cut, data = diamonds, refresh = 0)
# refresh=0 unterdrückt Ausgabe der Posteriori-Stichproben
```




```
## stan_glm
##  family:       gaussian [identity]
##  formula:      price ~ cut
##  observations: 1000
##  predictors:   5
## ------
##              Median  MAD_SD 
## (Intercept)   4571.7   675.1
## cutGood       -570.2   777.2
## cutIdeal     -1288.3   688.1
## cutPremium     362.5   709.8
## cutVery Good  -807.4   706.3
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 3795.0   82.4
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg
```

---


## Interpretation von `m10.6`

- `cut` hat fünf verschiedene Werte (Stufen, Faktorstufen, Ausprägungen), aber es werden nur vier angezeigt. 
- Die fünfte (`Fair`, nicht ausgegeben) ist die *Vergleichs- oder Referenzkategorie* (baseline) und ist im Achsenabschnitt ausgedrückt.
- Die Koeffizienten für `cut` geben jeweils den Unterschied zur Vergleichskategorie wieder.
- Diamanten der Schliffart `Fair` haben laut Modell einen mittleren Preis von ca. 4300$.
- Diamanten der Schliffart `Good` sind laut Modell im Mittel gut 400$ billiger als Diamanten der Schliffart `Fair`, etc.


&lt;img src="chunk-img/unnamed-chunk-11-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---

## Glauben wir jetzt an Preisunterschiede?

... zwischen den Preis-Mittelwerten in der Population?

- Ja, denn die Schätzintervalle für die Unterschiede waren im Modell `m10.6` alle weit von der Null entfernt.

- Auf Basis unseres Modells schließen wir also (mit hoher Sicherheit) aus, dass die Preise im Mittelwert *exakt* identisch sind.

- Ehrlicherweise hätte sowieso niemand geglaubt, dass die *Nullhypothese* `\(\mu_1 = \mu_2 = \ldots = \mu_k\)` bis in die letzte Dezimale gilt. Anders gesagt: Die Wahrscheinlichkeit eines bestimten Wertes einer stetigen Zufallsvariable ist praktisch Null.

- Aber: Viele Forscheris prüfen gerne die Nullhypothese, daher taucht der Begriff hier auf.

- Das Verfahren der Frequentistischen Statistik, um die Nullhypothese `\(\mu_1 = \mu_2 = \ldots = \mu_k\)` zu testen, nennt man *Varianzanalyse* (analysis of variance, kurz *ANOVA*).



---

## Modellkoeffizienten von `m10.6`

Die Regressionsoeffizienten pro Stufen von `cut`entsprechen den Mittelwerten `\(\hat{y_i}\)` aus der Posteriori-Verteilung. Mit `coef(m10.6)` kann man sie sich bequem ausgeben lassen.


```r
coef(m10.6)
```

```
##  (Intercept)      cutGood     cutIdeal   cutPremium cutVery Good 
##    4571.7415    -570.2364   -1288.3183     362.4788    -807.3535
```


- `\(\hat{y}_{Fair} = 4572\)`
- `\(\hat{y}_{Good} = -570\)`
- etc.


---

## Wechsel der Referenzkategorie

- `cut` ist eine nominale Variable, da passt in R der Typ `factor` (Faktor) am besten. Aktuell ist der Typ noch `character` (Text):


```r
diamonds &lt;- diamonds %&gt;% 
  mutate(cut = factor(cut))
```


- Im Standard sortiert R die Faktorstufen alphabetisch, aber man kann die Reihenfolge ändern. 


```r
levels(diamonds$cut)
```

```
## [1] "Fair"      "Good"      "Ideal"     "Premium"   "Very Good"
```

Setzen wir `Ideal` als Referenzkategorie und lassen die restliche Reihenfolge, wie sie ist:


```r
library(forcats)
diamonds &lt;- diamonds %&gt;% 
  mutate(cut = factor(cut),
    cut = fct_relevel(cut, "Ideal"))
```


```
## [1] "Ideal"     "Fair"      "Good"      "Premium"   "Very Good"
```







---

## Wechsel der Referenzkategorie ändert nichts Wesentliches am Modell


```r
m10.6a &lt;- stan_glm(price ~ cut, data = diamonds, refresh = 0)
m10.6a
```

```
## stan_glm
##  family:       gaussian [identity]
##  formula:      price ~ cut
##  observations: 1000
##  predictors:   5
## ------
##              Median MAD_SD
## (Intercept)  3280.3  187.5
## cutFair      1268.9  671.4
## cutGood       725.4  404.6
## cutPremium   1645.8  305.9
## cutVery Good  485.8  309.8
## 
## Auxiliary parameter(s):
##       Median MAD_SD
## sigma 3798.3   86.9
## 
## ------
## * For help interpreting the printed output see ?print.stanreg
## * For info on the priors used see ?prior_summary.stanreg
```



---

## Modellgüte mit `\(R^2\)` bestimmen


.pull-left[
- `\(R^2\)` gibt den Anteil der Gesamtvarianz (der AV) an, den das Modell erklärt.
- Höhere Wert von `\(R^2\)` bedeuten, dass das Modell die Daten besser erklärt.
- `\(R^2\)` wird normalerweise auf Basis eines Punktschätzers definiert.
- Solch eine Definition lässt aber viel Information - über die Ungewissheit der Schätzung - außen vor.
- Daher ist es wünschenswert, diese Information in `\(R^2\)` einfließen zu lassen: *Bayes-R-Quadrat*.
- mit `bayes_r2()` kann man sich die Verteilung berechnen lassen.
]

&lt;!-- R^2_{Bayes} = \frac{\text{erklärte Varianz}}{\text{erkärte Varianz + Residualvarianz}} = \frac{var_{fit}}{var_{fit}+var_{res}} --&gt;

&lt;!-- - `\(var_{fit}\)` ist die Varianz der vorhergesagten Schätzwerte `\(\hat{y}_i\)`. --&gt;


.pull-right[

```r
m10.6_r2 &lt;- bayes_R2(m10.6)
median(m10.6_r2)
```

```
## [1] 0.0308118
```

```r
IQR(m10.6_r2)
```

```
## [1] 0.01445986
```

&lt;img src="chunk-img/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

---

## Priori-Werte

- Unser Modell hat schwach informierte (weakly informative) Priors.
- Für Achsenabschnitt und die Regressionskoeffizienten werden Normalverteilungen angenommen mit Mittelwert entsprechend den Stichprobendaten und Streuung, die der 2.5-fachen der Streuung in der Stichprobe entspricht.

Mehr Infos kann man sich so ausgeben lassen: `prior_summary(m10.6)`.

Wo man man über mehr inhaltliches Wissen verfügt, so wird man die Priors anpassen wollen, z.B.:


```r
m10.6b &lt;- stan_glm(price ~ cut, data = diamonds, refresh = 0,
                   prior = normal(location = c(100, 100, 100, 100),
                                  scale = c(100, 100, 100, 100)),
                   prior_intercept = normal(300, 500)
                   )
```



```r
coef(m10.6b)
```

```
##  (Intercept)      cutFair      cutGood   cutPremium cutVery Good 
##   3595.53453    118.97219    107.34587    237.46326     84.05426
```

```r
sigma(m10.6b)
```

```
## [1] 3839.269
```




---


## "Praktisch" kein Unterschied






    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
